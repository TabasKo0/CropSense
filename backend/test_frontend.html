<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Crop Recommendation Test Front End</title>
    <style>
      body { font-family: Arial, sans-serif; margin: 20px; }
      form { margin-bottom: 20px; }
      label { display: inline-block; width: 120px; margin-bottom: 10px; }
      input { margin-bottom: 10px; }
    </style>
  </head>
  <body>
    <h1>Test Crop Recommendation</h1>
    <form id="predictForm">
      <div>
        <label for="nitrogen">Nitrogen:</label>
        <input type="number" id="nitrogen" name="nitrogen" value="100" step="any">
      </div>
      <div>
        <label for="phosphorus">Phosphorus:</label>
        <input type="number" id="phosphorus" name="phosphorus" value="45" step="any">
      </div>
      <div>
        <label for="potassium">Potassium:</label>
        <input type="number" id="potassium" name="potassium" value="125" step="any">
      </div>
      <div>
        <label for="temperature">Temperature:</label>
        <input type="number" id="temperature" name="temperature" value="20" step="any">
      </div>
      <div>
        <label for="humidity">Humidity:</label>
        <input type="number" id="humidity" name="humidity" value="70" step="any">
      </div>
      <div>
        <label for="ph">pH:</label>
        <input type="number" id="ph" name="ph" value="5.75" step="0.1">
      </div>
      <div>
        <label for="rainfall">Rainfall:</label>
        <input type="number" id="rainfall" name="rainfall" value="150" step="any">
      </div>
      <button type="submit">Get Crop Recommendation</button>
    </form>
    <h2>Result: <span id="result">N/A</span></h2>

    <!-- New UI for run_model2 -->
    <hr>
    <h1>Run Model 2 - Image Classification</h1>
    <form id="model2Form">
      <div>
        <label for="imageInput">Select Image:</label>
        <input type="file" id="imageInput" name="image">
      </div>
      <button type="submit">Upload Image</button>
    </form>
    <h2>Model 2 Result: <span id="resultModel2">N/A</span></h2>
<form id="predictForm">
      <div>
        <label for="state">State:</label>
        <select id="state" name="state" required>
          <option value="">Select State</option>
          <option value="West Bengal">West Bengal</option>
          <option value="Nagaland">Nagaland</option>
          <option value="Chhattisgarh">Chhattisgarh</option>
          <option value="Himachal Pradesh">Himachal Pradesh</option>
          <option value="Bihar">Bihar</option>
          <option value="Karnataka">Karnataka</option>
          <option value="Jammu and Kashmir">Jammu and Kashmir</option>
          <option value="Andhra Pradesh">Andhra Pradesh</option>
          <option value="Tripura">Tripura</option>
          <option value="Haryana">Haryana</option>
          <option value="Uttarakhand">Uttarakhand</option>
          <option value="Assam">Assam</option>
          <option value="Manipur">Manipur</option>
          <option value="Odisha">Odisha</option>
          <option value="Punjab">Punjab</option>
          <option value="Madhya Pradesh">Madhya Pradesh</option>
          <option value="Tamil Nadu">Tamil Nadu</option>
          <option value="Mizoram">Mizoram</option>
          <option value="Uttar Pradesh">Uttar Pradesh</option>
          <option value="Telangana">Telangana</option>
          <option value="Puducherry">Puducherry</option>
          <option value="Sikkim">Sikkim</option>
          <option value="Maharashtra">Maharashtra</option>
          <option value="Delhi">Delhi</option>
          <option value="Gujarat">Gujarat</option>
          <option value="Arunachal Pradesh">Arunachal Pradesh</option>
          <option value="Kerala">Kerala</option>
          <option value="Jharkhand">Jharkhand</option>
          <option value="Meghalaya">Meghalaya</option>
          <option value="Goa">Goa</option>
        </select>
      </div>
      <div>
        <label for="crop">Crop:</label>
        <select id="crop" name="crop" required>
          <option value="">Select Crop</option>
          <option value="Sesamum">Sesamum</option>
          <option value="Urad">Urad</option>
          <option value="Moong(Green Gram)">Moong(Green Gram)</option>
          <option value="Groundnut">Groundnut</option>
          <option value="Other Kharif pulses">Other Kharif pulses</option>
          <option value="Small millets">Small millets</option>
          <option value="Sunflower">Sunflower</option>
          <option value="Peas & beans (Pulses)">Peas & beans (Pulses)</option>
          <option value="Arhar/Tur">Arhar/Tur</option>
          <option value="Bajra">Bajra</option>
          <option value="Rapeseed &Mustard">Rapeseed &Mustard</option>
          <option value="Maize">Maize</option>
          <option value="Horse-gram">Horse-gram</option>
          <option value="Other Rabi pulses">Other Rabi pulses</option>
          <option value="Jowar">Jowar</option>
          <option value="Ragi">Ragi</option>
          <option value="Gram">Gram</option>
          <option value="Masoor">Masoor</option>
          <option value="Dry chillies">Dry chillies</option>
          <option value="Castor seed">Castor seed</option>
          <option value="Soyabean">Soyabean</option>
          <option value="Linseed">Linseed</option>
          <option value="Cotton(lint)">Cotton(lint)</option>
          <option value="Turmeric">Turmeric</option>
          <option value="Wheat">Wheat</option>
          <option value="Barley">Barley</option>
          <option value="Coriander">Coriander</option>
          <option value="Sannhamp">Sannhamp</option>
          <option value="Rice">Rice</option>
          <option value="Garlic">Garlic</option>
          <option value="Ginger">Ginger</option>
          <option value="Tobacco">Tobacco</option>
          <option value="Other Cereals">Other Cereals</option>
          <option value="Safflower">Safflower</option>
          <option value="Cowpea(Lobia)">Cowpea(Lobia)</option>
          <option value="Niger seed">Niger seed</option>
          <option value="other oilseeds">other oilseeds</option>
          <option value="Mesta">Mesta</option>
          <option value="Onion">Onion</option>
          <option value="Moth">Moth</option>
          <option value="Black pepper">Black pepper</option>
          <option value="Arecanut">Arecanut</option>
          <option value="Jute">Jute</option>
          <option value="Cardamom">Cardamom</option>
          <option value="Sugarcane">Sugarcane</option>
          <option value="Cashewnut">Cashewnut</option>
          <option value="Sweet potato">Sweet potato</option>
          <option value="Guar seed">Guar seed</option>
          <option value="Potato">Potato</option>
          <option value="Other Summer Pulses">Other Summer Pulses</option>
          <option value="Khesari">Khesari</option>
          <option value="Banana">Banana</option>
        </select>
      </div>
      <div>
        <label for="season">Season:</label>
        <select id="season" name="season" required>
          <option value="">Select Season</option>
          <option value="Kharif">Kharif</option>
          <option value="Rabi">Rabi</option>
          <option value="Whole Year">Whole Year</option>
          <option value="Summer">Summer</option>
          <option value="Autumn">Autumn</option>
          <option value="Winter">Winter</option>
        </select>
      </div>
      <div>
        <label for="crop_year">Crop Year:</label>
        <input type="number" id="crop_year" name="crop_year" min="1990" max="2025" value="2024" required>
      </div>
      <div>
        <label for="area_acres">Area (Acres):</label>
        <input type="number" id="area_acres" name="area_acres" min="0.1" step="0.1" required>
      </div>
      <div>
        <label for="production_bags">Production (Bags):</label>
        <input type="number" id="production_bags" name="production_bags" min="1" step="1" required>
      </div>
      <div>
        <label for="bag_weight">Bag Weight (kg):</label>
        <input type="number" id="bag_weight" name="bag_weight" min="50" max="100" value="75" required>
      </div>
      <div>
        <label for="rainfall">Rainfall (mm):</label>
        <input type="number" id="rainfall" name="rainfall" min="0.0" step="1.0" required>
      </div>
      <div>
        <label for="fertilizer">Fertilizer (kg/ha):</label>
        <input type="number" id="fertilizer" name="fertilizer" min="0.0" step="1.0" required>
      </div>
      <div>
        <label for="pesticide">Pesticide (kg/ha):</label>
        <input type="number" id="pesticide" name="pesticide" min="0.0" step="1.0" required>
      </div>
      <button type="submit">Predict Yield</button>
    </form>
    <h2>Result: <span id="result">N/A</span></h2>
    <script>
      document.getElementById('predictForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const data = {
          state: document.getElementById('state').value,
          crop: document.getElementById('crop').value,
          season: document.getElementById('season').value,
          crop_year: parseInt(document.getElementById('crop_year').value),
          area_acres: parseFloat(document.getElementById('area_acres').value),
          production_bags: parseFloat(document.getElementById('production_bags').value),
          bag_weight: parseFloat(document.getElementById('bag_weight').value),
          rainfall: parseFloat(document.getElementById('rainfall').value),
          fertilizer: parseFloat(document.getElementById('fertilizer').value),
          pesticide: parseFloat(document.getElementById('pesticide').value)
        };
        
        fetch('http://127.0.0.1:5000/model3', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(data)
        })
        .then(response => response.json())
        .then(result => {
          document.getElementById('result').textContent = result.prediction ? result.prediction : 'No prediction returned';
        })
        .catch(error => {
          console.error('Error:', error);
          document.getElementById('result').textContent = 'Error! Check console for details.';
        });
      });
    </script>
    <script>
      // When the form is submitted, send the data to the backend endpoint
      document.getElementById('predictForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const data = {
          nitrogen: parseFloat(document.getElementById('nitrogen').value),
          phosphorus: parseFloat(document.getElementById('phosphorus').value),
          potassium: parseFloat(document.getElementById('potassium').value),
          temperature: parseFloat(document.getElementById('temperature').value),
          humidity: parseFloat(document.getElementById('humidity').value),
          ph: parseFloat(document.getElementById('ph').value),
          rainfall: parseFloat(document.getElementById('rainfall').value)
        };
        
        // Assuming the backend server exposes a /predict endpoint
        fetch('http://127.0.0.1:5000/run_model1', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(data)
        })
        .then(response => response.json())
        .then(result => {
          document.getElementById('result').textContent = result.output ? result.output : 'No crop returned';
        })
        .catch(error => {
          console.error('Error:', error);
          document.getElementById('result').textContent = 'Error! Check console for details.';
        });
      });

      // New script for image upload and model 2 result
      document.getElementById('model2Form').addEventListener('submit', function(e) {
        e.preventDefault();
        var formData = new FormData();
        var fileField = document.getElementById('imageInput').files[0];
        formData.append('image', fileField);
        fetch('http://127.0.0.1:5000/run_model2', {
          method: 'POST',
          body: formData
        })
        .then(response => response.json())
        .then(result => {
          document.getElementById('resultModel2').textContent = result.output ? result.output : 'No output returned';
        })
        .catch(error => {
          console.error('Error:', error);
          document.getElementById('resultModel2').textContent = 'Error occurred';
        });
      });
    </script>
  </body>
</html>
